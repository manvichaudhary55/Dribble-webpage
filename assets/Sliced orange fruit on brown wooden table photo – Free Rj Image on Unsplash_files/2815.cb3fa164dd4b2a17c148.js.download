"use strict";(globalThis.webpackChunkunsplash_web=globalThis.webpackChunkunsplash_web||[]).push([[2815],{49117:(e,t,n)=>{n.d(t,{L:()=>i});var o=n(20901);const i=n(41893).kr9(o.YP)},2815:(e,t,n)=>{n.d(t,{q:()=>Z,Z:()=>B});var o={};n.r(o),n.d(o,{load_more_button_label:()=>k});var i=n(85893),r=n(30845),l=n(86706),s=n(79790),c=n(82644),a=n(50492),d=n(59130),h=n(15),u=n(52226),p=n(34743),f=n(72770),I=n(15358),g=n(20901),S=n(68493),m=n(15717),b=n(47773),O=n(61506),v=n(12970),x=n(15859),P=n(32868),j=n(41893),R=n(69206),y=n(63707),N=n(89017),E=n(70287),A=n(49117),q=n(85805);n(11767),n(74391),n(19191);const k=()=>"Load more",w=e=>o,C=(0,q.G)(w);function _(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Z=()=>{const e=(0,i.jsx)(j.tJQ,{className:"ATnvl",children:(0,b.zG)(u.w6H(0,17),u.UID((e=>(0,i.jsx)(j.tJQ,{className:"dycl5",children:(0,i.jsx)(j.tJQ,{className:"PwSsU O84oE"})},e))))});return(0,i.jsxs)(j.PRT,{children:[(0,i.jsx)(j.tJQ,{className:x.yC,children:e}),(0,i.jsx)(N.Z,{className:x.ny,children:e})]})},D=(0,O.DO)()({shouldRequireInfiniteScrollOptIn:!1,getNoContentEl:p.HP((()=>(0,i.jsx)(R.Z,{type:"photos"}))),getPlaceholderEl:p.HP((()=>(0,i.jsx)(Z,{})))}),F=S.Ue();class G extends j.wA2{constructor(){super(...arguments),_(this,"getInfiniteScrollSetting",(e=>{let{shouldRequireInfiniteScrollOptIn:t}=e;return t?F.mk.OptInRequired({optedIn:!1}):F.mk.Enabled})),_(this,"state",{infiniteScrollSetting:this.getInfiniteScrollSetting(this.props)}),_(this,"toggleInfiniteScrollOptIn",(()=>{const{infiniteScrollSetting:e}=this.state;(0,b.zG)(e,F.match({OptInRequired:e=>{let{optedIn:t}=e;const n=F.mk.OptInRequired({optedIn:(0,m.ff)(t)});this.setState({infiniteScrollSetting:n})},[S._]:b.Q1}))})),_(this,"fetchDataAndBuildActions",(0,r.Z)((e=>(0,b.ls)(e,I.UI((0,b.ls)(h.Yq,a.N.traverseArray(a.We),(e=>{let[t,n]=e;return[(0,c.VA)(n),c.aU.mk.HandleNextPhotoFeedPageResponse({feedId:this.props.feedId,photoSlugs:(0,b.zG)(t,u.UID((e=>e.slug)))})]}))))))),_(this,"createPhotoFeedIdContextValue",(0,r.Z)((e=>g.G(e))))}UNSAFE_componentWillReceiveProps(e){if(e.shouldRequireInfiniteScrollOptIn!==this.props.shouldRequireInfiniteScrollOptIn){const t=this.getInfiniteScrollSetting(e);this.setState({infiniteScrollSetting:t})}}render(){const{photoFeedOption:e,photosOption:t,children:n,getNoContentEl:o,getPlaceholderEl:r,renderBeneathLoadMoreButton:l,feedId:s,fetchPhotos:c,notifier$:a,intersectionObserverRoot:d,intersectionObserverRootMarginBottom:h,t:u}=this.props,{infiniteScrollSetting:p}=this.state,I=(0,b.zG)(p,F.match({OptInRequired:e=>{let{optedIn:t}=e;return t},Enabled:()=>!0})),g=!1===I;return(0,i.jsx)(A.L.Provider,{value:this.createPhotoFeedIdContextValue(s),children:(0,i.jsx)(y.f,{renderItems:n,feedItemsOption:t,feedStateOption:e,getScrollFooterEl:()=>(0,i.jsx)(j.tJQ,{className:"rx4AP",children:(0,b.zG)(I,m.EQ({True:()=>(0,i.jsx)(E.Z,{}),False:()=>(0,i.jsxs)(j.PRT,{children:[(0,i.jsx)(N.Z,{className:"gDCZZ",children:(0,i.jsx)(j.Jgb,{className:j.Shc((0,P.yO)({type:P.L$.Outline}),"WMIal KHq0c"),onClick:this.toggleInfiniteScrollOptIn,type:"button",children:u.load_more_button_label()})}),l?.()]})}))}),getNoContentEl:o,getPlaceholderEl:r,shouldDisableInfiniteScroll:g,fetchDataAndBuildActions:this.fetchDataAndBuildActions(c),notifier$:a,intersectionObserverRoot:d,intersectionObserverRootMarginBottom:h},(0,f.Vv)(s))})}}const T=(0,d.O)()((()=>{const e=(0,v.XT)(),t=(0,v.u0)();return(n,o)=>({photoFeedOption:e(n,o.feedId),photosOption:t(n,o.feedId)})})),B=(0,b.zG)(G,(0,l.$j)(T),C,(e=>(0,s.b9)(e,D)))}}]);